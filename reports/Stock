Title==Stock Actual
Columns==Articulo,codigo_de_articulo,String|Cantidad,Cantidad,bigDecimalType,1
ShowNumbers==True
SQL==select codigo_de_articulo, sum(cantidad) as cantidad from (select f.codigo_interno as codigo_interno, f.numero_fiscal, DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc, fc.codigo_de_articulo, articulo.descripcion, "Factura" as tipo , -1*sum(fc.cantidad) as cantidad from factura_contiene fc , factura f, articulo where fc.codigo_de_articulo = articulo.codigo and f.codigo_interno = fc.codigo_interno_factura and ? <= fecha_creacion and fecha_creacion <= adddate(?,1) and estado='Facturada' and codigo_de_articulo like concat(concat('%',trim(?)),'%') group by codigo_interno, fc.codigo_de_articulo union select f.codigo_interno , f.numero_fiscal, DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc, fc.codigo_de_articulo, articulo.descripcion, "Nota de Credito" as tipo, sum(fc.cantidad) as cantidad from nota_de_credito_contiene fc , nota_de_credito f, articulo where fc.codigo_de_articulo = articulo.codigo and f.codigo_interno = fc.codigo_interno_nota_de_credito and ? <= fecha_creacion and fecha_creacion <= adddate(?,1) and estado='Nota' and codigo_de_articulo like concat(concat('%',trim(?)),'%') group by codigo_interno, fc.codigo_de_articulo union select mi.codigo , "-" as numero_fiscal , DATE_FORMAT(mi.fecha,'%d-%m-%y %h:%i') as fc, dm.codigo_articulo , articulo.descripcion, "Traslado/Ajuste" as tipo , sum(dm.cantidad_articulo) as cantidad from movimiento_inventario mi , detalles_movimientos dm , articulo where mi.identificador = dm.identificador_movimiento and dm.codigo_articulo = articulo.codigo and dm.codigo_articulo like concat(concat('%',trim(?)),'%') and ? <= mi.fecha and mi.fecha <= adddate(?,1) group by mi.identificador, dm.codigo_articulo) as myTable where tipo like concat(concat('%',trim(?)),'%') and codigo_interno like concat(concat('%',trim(?)),'%') and numero_fiscal like concat(concat('%',trim(?)),'%') group by codigo_de_articulo;
SQL==select codigo_de_articulo, sum(cantidad) as cantidad from (select f.codigo_interno as codigo_interno, f.numero_fiscal, DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc, fc.codigo_de_articulo, articulo.descripcion, "Factura" as tipo , -1*sum(fc.cantidad) as cantidad from factura_contiene fc , factura f, articulo where fc.codigo_de_articulo = articulo.codigo and f.codigo_interno = fc.codigo_interno_factura and estado='Facturada' group by codigo_interno, fc.codigo_de_articulo union select f.codigo_interno , f.numero_fiscal, DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc, fc.codigo_de_articulo, articulo.descripcion, "Nota de Credito" as tipo, sum(fc.cantidad) as cantidad from nota_de_credito_contiene fc , nota_de_credito f, articulo where fc.codigo_de_articulo = articulo.codigo and f.codigo_interno = fc.codigo_interno_nota_de_credito and estado='Nota' group by codigo_interno, fc.codigo_de_articulo union select mi.codigo , "-" as numero_fiscal , DATE_FORMAT(mi.fecha,'%d-%m-%y %h:%i') as fc, dm.codigo_articulo , articulo.descripcion, "Traslado/Ajuste" as tipo , sum(dm.cantidad_articulo) as cantidad from movimiento_inventario mi , detalles_movimientos dm , articulo where mi.identificador = dm.identificador_movimiento and dm.codigo_articulo = articulo.codigo group by mi.identificador, dm.codigo_articulo) as myTable group by codigo_de_articulo;
Vertical==False
