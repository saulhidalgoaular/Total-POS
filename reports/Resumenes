Title==Resumen de Operaciones
Columns==Tipo Doc,Documento,String|Nro Documento,codigo_interno,String|Nro Fiscal,numero_fiscal,String|Fecha,fc,String|Ref,Referencia,String|Caja,identificador_pos,String|Sin Iva,total_sin_iva,bigDecimalType,1|IVA,iva,bigDecimalType|Total,total_con_iva,bigDecimalType,1|Cantidad,cantidad,bigDecimalType,1
ShowNumbers==True
Parameters==Tipo, :Factura:Nota de Credito:Traslado/Ajuste,Combo,10|Fecha Inicial,,Date,1:3:5|Fecha Final,,Date,2:4:6|Referencia,,String,9|Nro Documento,,String,7|Nro Fiscal,,String,8
SQL==select * from (select "Factura" as Documento, "-" as Referencia, identificador_pos , codigo_interno , DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc , numero_fiscal , total_sin_iva*(1-descuento_global) as total_sin_iva , iva*(1-descuento_global) as iva , total_con_iva*(1-descuento_global) as total_con_iva , -1*sum(fc.cantidad) as cantidad from factura , factura_contiene fc where ? <= fecha_creacion and fecha_creacion <= adddate(?,1) and fc.codigo_interno_factura = factura.codigo_interno and estado = 'Facturada' group by factura.codigo_interno union (select "Nota de Credito" as Documento, codigo_factura as Referencia , identificador_pos, codigo_interno , DATE_FORMAT(fecha_creacion,'%d-%m-%y %h:%i') as fc, numero_fiscal, -1*total_sin_iva as total_sin_iva, -1*iva as iva , -1*total_con_iva as total_con_iva, sum(nc.cantidad) as cantidad from nota_de_credito , nota_de_credito_contiene nc where nc.codigo_interno_nota_de_credito = nota_de_credito.codigo_interno and ? <= fecha_creacion and fecha_creacion <= adddate(?,1) and estado='Nota' group by nota_de_credito.codigo_interno) union select "Traslado/Ajuste" as Documento , identificador as referencia , "-" as identificador_pos , codigo as codigo_interno , DATE_FORMAT(fecha,'%d-%m-%y') as fc , dm.tipo as numero_fiscal , .0 as total_sin_iva , .0 as iva, .0 as total_con_iva , sum(dm.cantidad_articulo) as cantidad from movimiento_inventario , detalles_movimientos dm where movimiento_inventario.identificador = dm.identificador_movimiento and ? <= fecha and fecha <= adddate(?,1) group by dm.identificador_movimiento , dm.tipo ) as myTable where codigo_interno like concat(concat('%',trim(?)),'%') and numero_fiscal like concat(concat('%',trim(?)),'%') and Referencia like concat(concat('%',trim(?)),'%') and Documento like concat(concat('%',trim(?)),'%') order by numero_fiscal
Vertical==True